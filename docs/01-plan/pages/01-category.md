# 카테고리 페이지 기획서

> PDF p.12~14 기반

---

## 개요

- **경로**: `/category`
- **메뉴**: 사이드바 1번
- **목적**: KT알파(기프티쇼) 카테고리를 네이트온 전시 카테고리로 매핑 및 노출여부 관리

---

## 화면 구성

```
┌─────────────────────────────────────────────────────────────────┐
│ 카테고리                                                         │  ← PageHeader
├─────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ 노출여부 [전체 V]   KT 카테고리 [______]   전시 카테고리 [______] │ │  ← SearchFilter
│ │                                           [초기화] [검색]   │ │
│ └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│            [카테고리 동기화] [전시 카테고리 관리] [엑셀 다운로드]    │  ← 액션 버튼 영역
│                                                                 │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ ID │ KT 알파 카테고리 │    전시 카테고리     │    노출여부     │ │  ← Table
│ ├────┼────────────────┼────────────────────┼─────────────────┤ │
│ │1112│     도서       │ [선택 V] [수정]     │ (○) 미노출       │ │
│ │1111│     버거       │  버거    [수정]     │ (●) 노출        │ │
│ │1110│     올레       │ [선택 V] [수정]     │ (○) 미노출       │ │
│ │... │     ...        │    ...             │    ...          │ │
│ └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│                        [페이지네이션]                            │
└─────────────────────────────────────────────────────────────────┘
```

---

## 검색 필터

| 필드명 | 컴포넌트 | 옵션/플레이스홀더 | 검색 방식 |
|--------|----------|------------------|----------|
| 노출여부 | Select | 전체 / 노출 / 미노출 | exact |
| KT 카테고리 | Input | "KT 카테고리명" | like %검색어% |
| 전시 카테고리 | Input | "전시 카테고리명" | like %검색어% |

---

## 액션 버튼

| 버튼명 | Variant | 동작 |
|--------|---------|------|
| 카테고리 동기화 | primary | KT알파에서 신규 카테고리 가져오기 (수동) |
| 전시 카테고리 관리 | primary | 전시 카테고리 관리 팝업 열기 |
| 엑셀 다운로드 | secondary | 목록 엑셀 다운로드 |

---

## 테이블 정의

### 컬럼

| 컬럼명 | 필드 | 타입 | 너비 | 정렬 |
|--------|------|------|------|------|
| ID | id | number | 80px | left |
| KT 알파 카테고리 | ktCategoryName | string | auto | left |
| 전시 카테고리 | displayCategoryId + 인라인편집 | custom | 200px | left |
| 노출여부 | isVisible | Toggle + text | 150px | left |

### 전시 카테고리 컬럼 상세

```
[조회 모드]
┌──────────────────────────┐
│  {카테고리명}  [수정]     │   ← 선택 안됐으면 "선택" 표시
└──────────────────────────┘

[편집 모드] - 수정 버튼 클릭 시
┌──────────────────────────┐
│  [선택   V]  [저장]       │   ← Select 활성화, 버튼이 저장으로 변경
└──────────────────────────┘
```

### 노출여부 컬럼 상세

```
┌──────────────────────────┐
│  (●────○)  노출          │   ← Toggle + 상태 텍스트
└──────────────────────────┘
```

### 정렬 및 페이지네이션

- 정렬: 최신 ID순 (내림차순)
- 페이지네이션: 20개씩

---

## 전시 카테고리 관리 팝업

> 버튼 클릭 시 Modal로 열림

### 조회 모드

```
┌─────────────────────────────────────────────────────────┐
│ 전시 카테고리 관리                                   [X] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ 총 5개                                         [편집]   │
│                                                         │
│ ┌─────┬────────┬────────────┬──────────┐               │
│ │ id  │ 아이콘  │ 카테고리명  │ 사용여부  │               │
│ ├─────┼────────┼────────────┼──────────┤               │
│ │1222 │  🍔    │   버거      │   사용   │               │
│ │1221 │  🍰    │   디저트    │   사용   │               │
│ │1220 │  🎫    │   상품권    │   사용   │               │
│ │1219 │  🎭    │  문화상품권  │  미사용  │               │
│ │...  │  ...   │    ...     │   ...    │               │
│ └─────┴────────┴────────────┴──────────┘               │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 편집 모드

```
┌─────────────────────────────────────────────────────────┐
│ 전시 카테고리 관리                                   [X] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ 총 5개                                       [+ 추가]   │
│                                                         │
│ ┌─────┬────────┬────────────────────┬─────────────────┐ │
│ │ id  │ 아이콘  │    카테고리명       │    사용여부     │ │
│ ├─────┼────────┼────────────────────┼─────────────────┤ │
│ │     │ [📤🗑] │ [카테고리명을 입력] │ ● 사용 ○ 미사용 │ │ ← 신규 행
│ │1222 │ [🍔🗑] │ [버거_________]    │ ● 사용 ○ 미사용 │ │
│ │1221 │ [🍰🗑] │ [디저트_______]    │ ● 사용 ○ 미사용 │ │
│ │...  │  ...   │       ...         │      ...        │ │
│ └─────┴────────┴────────────────────┴─────────────────┘ │
│                                                         │
│                               [취소]  [저장]            │
└─────────────────────────────────────────────────────────┘
```

### 팝업 테이블 컬럼

| 컬럼명 | 조회모드 | 편집모드 |
|--------|---------|---------|
| id | text (자동생성) | text (비활성화) |
| 아이콘 | image (이모지/이미지) | ImageUpload + 삭제버튼 |
| 카테고리명 | text | Input |
| 사용여부 | text (사용/미사용) | Radio (사용/미사용) |

### 팝업 액션

| 버튼 | 모드 | 동작 |
|------|------|------|
| 편집 | 조회 | 편집 모드로 전환 |
| + 추가 | 편집 | 최상단에 새 행 추가 |
| 취소 | 편집 | 조회 모드로 복귀 (변경사항 취소) |
| 저장 | 편집 | 저장 후 조회 모드로 복귀 |
| X | 공통 | 팝업 닫기 |

### 유효성 검사

- 카테고리명 중복 불가 → alert "중복된 이름의 카테고리가 존재합니다."
- KT알파 카테고리와 매핑된 전시 카테고리를 미사용으로 변경 시 → alert "{카테고리명}은 매핑되어 있어 미사용으로 변경할 수 없습니다."

---

## 데이터 모델

### KT 알파 카테고리 (ktAlphaCategory)

```typescript
interface KtAlphaCategory {
  id: number;                    // KT알파 카테고리 ID
  name: string;                  // KT알파 카테고리명
  displayCategoryId: number | null;  // 매핑된 전시 카테고리 ID
  isVisible: boolean;            // 노출여부
  createdAt: string;             // 등록일시
  updatedAt: string;             // 수정일시
}
```

### 전시 카테고리 (displayCategory)

```typescript
interface DisplayCategory {
  id: number;                    // 전시 카테고리 ID
  name: string;                  // 전시 카테고리명
  icon: string;                  // 아이콘 URL
  isActive: boolean;             // 사용여부
  createdAt: string;             // 등록일시
  updatedAt: string;             // 수정일시
}
```

---

## 비즈니스 규칙

1. **카테고리 동기화**
   - 하루 한번 배치로 KT알파 카테고리 자동 동기화
   - 수동 동기화 버튼으로도 가능
   - 신규 카테고리는 전시 카테고리 미매핑 + 미노출 상태로 인입

2. **노출여부**
   - 카테고리 노출여부가 미노출이면 해당 카테고리의 상품들은 전체 미노출
   - 목록에서 토글로 바로 변경 가능

3. **전시 카테고리 매핑**
   - 수정 버튼 → 셀렉트박스 활성화 → 선택 → 저장
   - 사용 중인 전시 카테고리만 셀렉트박스에 표시

---

## 사용 컴포넌트

- PageHeader
- SearchFilter
- Button (primary, secondary, text)
- Select
- Input
- Table
- Toggle
- Modal
- ImageUpload (팝업)
- Radio (팝업)
